<!DOCTYPE html> 
<html lang="vi"> 
<head> 
<meta charset="UTF-8"> 
<title>TH·ªé FRUITS</title> 
 
<style> 
body{ 
    font-family: Arial, sans-serif; 
    background: linear-gradient(135deg,#e6e7eb,#1ef7ec); 
    min-height:100vh; 
    display:flex; 
    justify-content:center; 
    align-items:center; 
} 
.box{ 
    background:#fff; 
    padding:25px; 
    width:500px; 
    border-radius:12px; 
    box-shadow:0 10px 25px rgba(0,0,0,.25); 
    position:relative; 
} 
h2{text-align:center;color:#4b1cce;letter-spacing:2px} 
input,textarea{ 
    width:100%; 
    padding:10px; 
    margin-top:8px; 
    font-size:15px; 
    border-radius:6px; 
    border:1px solid #ccc; 
} 
button{ 
    width:100%; 
    padding:10px; 
    margin-top:8px; 
    font-size:15px; 
    border:none; 
    border-radius:6px; 
    cursor:pointer; 
    color:#fff; 
} 
.add{background:#28a745} 
.redeem{background:#ff9800} 
.reset{background:#dc3545} 
 
.info{ 
    margin-top:10px; 
    background:#f1f1f1; 
    padding:10px; 
    border-radius:6px; 
    text-align:center; 
    font-size:16px; 
    font-weight:bold; 
} 
.list{ 
    margin-top:10px; 
    max-height:160px; 
    overflow-y:auto; 
    border:1px solid #ddd; 
    border-radius:6px; 
    font-size:14px; 
} 
.list div{padding:6px;cursor:pointer} 
.list div:hover{background:#eee} 
 
/* AUTOCOMPLETE */ 
.suggestions{ 
    position:absolute; 
    background:#fff; 
    border:1px solid #ddd; 
    border-radius:10px; 
    max-height:160px; 
    overflow-y:auto; 
    display:none; 
    width:calc(100% - 50px); 
    z-index:20; 
    box-shadow:0 8px 20px rgba(0,0,0,.15); 
} 
.suggestions div{ 
    padding:10px 12px; 
    display:flex; 
    justify-content:space-between; 
    cursor:pointer; 
} 
.suggestions div:hover{background:#f2f4ff} 
 
/* VIP */ 
.vip-box{ 
    position:fixed; 
    left:20px; 
    top:50%; 
    transform:translateY(-50%); 
    background:#fff; 
    padding:15px; 
    width:260px; 
    border-radius:12px; 
    box-shadow:0 10px 25px rgba(0,0,0,.25); 
} 
.vip-box h4{text-align:center;color:#ff9800} 
#vipList div{padding:6px;border-bottom:1px solid #eee;cursor:pointer} 
 
/* IMPORT */ 
.import-box{ 
    position:fixed; 
    top:50%; 
    transform:translateY(-50%); 
    background:#fff; 
    padding:15px; 
    width:280px; 
    border-radius:12px; 
    margin-left:900px; 
    box-shadow:0 10px 25px rgba(0,0,0,.25); 
} 
.import-box h4{text-align:center;color:#6f42c1} 
.import-btn{background:#6f42c1} 
</style> 
</head> 
 
<body> 
 
<!-- VIP --> 
<div class="vip-box"> 
    <h4>üåü Kh√°ch ‚â• 10 ƒëi·ªÉm</h4> 
    <div id="vipList"></div> 
</div> 
 
<!-- FORM --> 
<div class="box"> 
    <h2>üçì TH·ªé FRUITS üçì</h2> 
 
    <input id="phone" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i"> 
    <div class="suggestions" id="suggestions"></div> 
 
    <input id="money" type="number" placeholder="Nh·∫≠p ti·ªÅn (100 = 1 ƒëi·ªÉm)"> 
    <input id="redeemAmount" type="number" placeholder="S·ªë ƒëi·ªÉm mu·ªën tr·ª´"> 
 
    <button class="add" onclick="addPoints()">‚ûï C·ªông ƒëi·ªÉm</button> 
    <button class="redeem" onclick="redeemPoints()">üéÅ Tr·ª´ ƒëi·ªÉm</button> 
    <button class="reset" onclick="resetPoints()">‚ôª Reset ƒëi·ªÉm</button> 
    <button class="reset" onclick="deleteCustomer()">‚ùå X√≥a kh√°ch</button> 
 
    <input type="password" id="adminPass" placeholder="M·∫≠t kh·∫©u admin"> 
    <button class="reset" onclick="resetAllCustomers()">üóë Reset to√†n b·ªô</button> 
 
    <div class="info">ƒêi·ªÉm hi·ªán t·∫°i: <span id="points">0</span></div> 
    <div class="info">T·ªïng kh√°ch: <span id="totalCustomers">0</span></div> 
 
    <div class="list" id="customerList"></div> 
</div> 
 
<!-- IMPORT --> 
<div class="import-box"> 
    <h4>üì• D√°n d·ªØ li·ªáu</h4> 
    <textarea id="importData" rows="7" placeholder="üì± 0374244904 ‚Äî ‚≠ê 5 ƒëi·ªÉm"></textarea> 
    <button class="import-btn" onclick="importCustomers()">üíæ L∆∞u</button> 
</div> 
 
<script> 
const ADMIN_PASSWORD = "0965579926"; 
let customers = JSON.parse(localStorage.getItem("customers") || "{}"); 
 
const phoneInput = document.getElementById("phone"); 
const suggestions = document.getElementById("suggestions"); 
 
/* AUTOCOMPLETE */ 
phoneInput.addEventListener("input", () => { 
    let v = phoneInput.value.trim(); 
    suggestions.innerHTML = ""; 
    if (!v) return suggestions.style.display = "none"; 
 
    Object.keys(customers) 
        .filter(p => p.startsWith(v)) 
        .forEach(p => { 
            let d = document.createElement("div"); 
            d.innerHTML = `<b>${p}</b><span>‚≠ê ${customers[p].points}</span>`; 
            d.onclick = () => selectPhone(p); 
            suggestions.appendChild(d); 
        }); 
 
    suggestions.style.display = "block"; 
}); 
 
function selectPhone(p){ 
    phoneInput.value = p; 
    document.getElementById("points").innerText = customers[p].points; 
    suggestions.style.display = "none"; 
} 
 
function updateUI(){ 
    let list = document.getElementById("customerList"); 
    let vip = document.getElementById("vipList"); 
    list.innerHTML = ""; 
    vip.innerHTML = ""; 
    let count = 0; 
 
    for(let p in customers){ 
        count++; 
        list.innerHTML += `<div onclick="selectPhone('${p}')">üì± ${p} ‚Äî ‚≠ê ${customers[p].points} (L·∫ßn mua: ${customers[p].purchaseCount})</div>`; 
        if(customers[p].points >= 10) 
            vip.innerHTML += `<div onclick="selectPhone('${p}')">üì± ${p} ‚≠ê ${customers[p].points} (L·∫ßn mua: ${customers[p].purchaseCount})</div>`; 
    } 
    document.getElementById("totalCustomers").innerText = count; 
} 
 
function save(){ 
    localStorage.setItem("customers", JSON.stringify(customers)); 
    updateUI(); 
} 
 
/* ===== C·ªòNG ƒêI·ªÇM ===== */ 
function addPoints(){ 
    let p = phoneInput.value.trim(); 
    let m = parseInt(money.value); 
 
    if(!/^\d{10}$/.test(p) || !m) return; 
 
    let added = Math.floor(m / 100); 
    if(added <= 0) return; 
 
    if(!customers[p]) { 
        customers[p] = { points: 0, purchaseCount: 0 }; 
    } 
    customers[p].points += added; 
    customers[p].purchaseCount += 1; // TƒÉng s·ªë l·∫ßn mua l√™n 1 
 
    document.getElementById("points").innerText = customers[p].points; 
 
    alert(`‚úÖ ƒê√£ c·ªông ${added} ƒëi·ªÉm. T·ªïng s·ªë l·∫ßn mua: ${customers[p].purchaseCount}`); 
    save(); 
     
    // L√†m tr·ªëng tr∆∞·ªùng nh·∫≠p ti·ªÅn sau khi c·ªông ƒëi·ªÉm 
    document.getElementById("money").value = ""; 
} 
 
/* ===== TR·ª™ ƒêI·ªÇM ===== */ 
function redeemPoints(){ 
    let p = phoneInput.value.trim(); 
    let a = parseInt(redeemAmount.value); 
 
    if(!customers[p] || !a || customers[p].points < a) return; 
 
    customers[p].points -= a; 
    document.getElementById("points").innerText = customers[p].points; 
 
    alert(`üéÅ ƒê√£ tr·ª´ ${a} ƒëi·ªÉm`); 
    save(); 
} 
 
function resetPoints(){ 
    let p = phoneInput.value.trim(); 
    if(customers[p]){ 
        customers[p].points = 0; 
        customers[p].purchaseCount = 0; // Reset c·∫£ s·ªë l·∫ßn mua 
        document.getElementById("points").innerText = 0; 
        save(); 
    } 
} 
 
function deleteCustomer(){ 
    let p = phoneInput.value.trim(); 
    if(customers[p]){ 
        delete customers[p]; 
        document.getElementById("points").innerText = 0; 
        save(); 
    } 
} 
 
function resetAllCustomers(){ 
    if(adminPass.value !== ADMIN_PASSWORD) return; 
    customers = {}; 
    document.getElementById("points").innerText = 0; 
    save(); 
} 
 
function importCustomers(){ 
    importData.value.split("\n").forEach(l => { 
        let m = l.match(/(\d{10}).*‚≠ê\s*(\d+)/); 
        if(m) { 
            customers[m[1]] = { points: +m[2], purchaseCount: 0 }; // Khi import, s·ªë l·∫ßn mua m·∫∑c ƒë·ªãnh l√† 0 
        } 
    }); 
    save(); 
    importData.value = ""; 
} 
 
updateUI(); 
</script> 
 
</body> 
</html> 








